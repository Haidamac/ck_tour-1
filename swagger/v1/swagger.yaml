---
openapi: 3.0.1
info:
  title: API V1
  version: v1
paths:
  "/api/v1/accommodations":
    get:
      summary: list accommodations
      tags:
      - Accommodation
      parameters:
      - name: toponyms
        in: query
        schema:
          type: string
        description: Locality
      - name: check_in
        in: query
        schema:
          type: string
        description: Date of check in
      - name: check_out
        in: query
        schema:
          type: string
        description: Date of check in
      - name: number_of_peoples
        in: query
        schema:
          type: integer
        description: Number of peoples
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
    post:
      summary: create accommodation
      tags:
      - Accommodation
      description: Creates a new accommodation
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '201':
          description: successful created
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                address:
                  type: string
                phone:
                  type: string
                email:
                  type: string
                  format: email
                kind:
                  type: string
                  enum:
                  - hotel
                  - hostel
                  - apartment
                  - greenhouse
                user_id:
                  type: string
              required:
              - name
              - description
              - address
              - phone
              - email
              - kind
              - user_id
        required: true
  "/api/v1/accommodations/{id}":
    parameters:
    - name: id
      in: path
      description: accommodation id
      required: true
      schema:
        type: string
    get:
      summary: show accommodation
      tags:
      - Accommodation
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
    put:
      summary: update accommodation
      tags:
      - Accommodation
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                address:
                  type: string
                phone:
                  type: string
                email:
                  type: string
                  format: email
                kind:
                  type: string
                  enum:
                  - hotel
                  - hostel
                  - apartment
                  - greenhouse
              required: false
        required: true
    delete:
      summary: delete accommodation
      tags:
      - Accommodation
      security:
      - jwt_auth: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
  "/api/v1/accommodations/{accommodation_id}/rooms/{room_id}/amenities":
    parameters:
    - name: accommodation_id
      in: path
      description: accommodation_id
      required: true
      schema:
        type: string
    - name: room_id
      in: path
      description: room_id
      required: true
      schema:
        type: string
    post:
      summary: create amenity
      tags:
      - Amenity
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '201':
          description: successful created
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                conditioner:
                  type: boolean
                tv:
                  type: boolean
                refrigerator:
                  type: boolean
                kettle:
                  type: boolean
                mv_owen:
                  type: boolean
                hair_dryer:
                  type: boolean
                nice_view:
                  type: boolean
                inclusive:
                  type: boolean
        required: true
  "/api/v1/accommodations/{accommodation_id}/rooms/{room_id}/amenities/{id}":
    parameters:
    - name: accommodation_id
      in: path
      description: accommodation_id
      required: true
      schema:
        type: string
    - name: room_id
      in: path
      description: room_id
      required: true
      schema:
        type: string
    get:
      summary: show amenity
      tags:
      - Amenity
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
    put:
      summary: update amenity
      tags:
      - Amenity
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                conditioner:
                  type: boolean
                tv:
                  type: boolean
                refrigerator:
                  type: boolean
                kettle:
                  type: boolean
                mv_owen:
                  type: boolean
                hair_dryer:
                  type: boolean
                nice_view:
                  type: boolean
                inclusive:
                  type: boolean
              required: false
    delete:
      summary: delete amenity
      tags:
      - Amenity
      security:
      - jwt_auth: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
  "/api/v1/attractions":
    get:
      summary: list attractions
      tags:
      - Attraction
      parameters:
      - name: toponyms
        in: query
        schema:
          type: string
        description: Locality
      responses:
        '200':
          description: successful
        '404':
          description: not found
        '422':
          description: invalid request
    post:
      summary: create attraction
      tags:
      - Attraction
      description: Creates a new attraction
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '201':
          description: successful created
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                description:
                  type: string
              required:
              - title
              - description
        required: true
  "/api/v1/attractions/{id}":
    parameters:
    - name: id
      in: path
      description: attraction id
      required: true
      schema:
        type: string
    get:
      summary: show attraction
      tags:
      - Attraction
      responses:
        '200':
          description: successful
        '404':
          description: not found
        '422':
          description: invalid request
    put:
      summary: update attraction
      tags:
      - Attraction
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                description:
                  type: string
              required: false
        required: true
    delete:
      summary: delete attraction
      tags:
      - Attraction
      security:
      - jwt_auth: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
  "/api/v1/search":
    get:
      summary: search article
      tags:
      - Attraction
      parameters:
      - name: req
        in: query
        schema:
          type: string
        description: Search attractions by phrase in title, description or locality
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
  "/api/v1/auth/login":
    post:
      summary: authentication user
      tags:
      - Authentication
      description: authentication user
      parameters: []
      responses:
        '201':
          description: successful created
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
              required:
              - email
              - password
        required: true
  "/api/v1/users/{id}/bookings":
    parameters:
    - name: user_id
      in: path
      description: user id
      required: true
      schema:
        type: string
    get:
      summary: list booking
      tags:
      - Booking
      security:
      - jwt_auth: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
    post:
      summary: create booking
      tags:
      - Booking
      description: Creates a new booking
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '201':
          description: successful created
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                number_of_peoples:
                  type: integer
                check_in:
                  type: string
                  format: date
                check_out:
                  type: string
                  format: date
                note:
                  type: string
                confirmation:
                  type: integer
              required:
              - number_of_peoples
              - check_in
              - check_out
        required: true
  "/api/v1/users/{id}/bookings/{id}":
    parameters:
    - name: user_id
      in: path
      description: user id
      required: true
      schema:
        type: string
    - name: booking_id
      in: path
      description: booking id
      required: true
      schema:
        type: string
    get:
      summary: show booking
      tags:
      - Booking
      security:
      - jwt_auth: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
    put:
      summary: update booking
      tags:
      - Booking
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                number_of_peoples:
                  type: integer
                check_in:
                  type: string
                  format: date
                check_out:
                  type: string
                  format: date
                note:
                  type: string
                confirmation:
                  type: integer
              required: false
        required: true
    delete:
      summary: delete booking
      tags:
      - Booking
      security:
      - jwt_auth: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
  "/api/v1/{parentable_type}/{parentable_id}/coordinates":
    parameters:
    - name: parentable_type
      in: path
      description: f.e. attractions, accommodations
      required: true
      schema:
        type: string
    - name: parentable_id
      in: path
      description: f.e. attractions_id, accommodations_id
      required: true
      schema:
        type: string
    post:
      summary: create coordinate
      tags:
      - Coordinate
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '201':
          description: successful created
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                latitude:
                  type: string
                  format: decimal
                longitude:
                  type: string
                  format: decimal
              required:
              - latitude
              - longitude
        required: true
    get:
      summary: show coordinate
      tags:
      - Coordinate
      responses:
        '200':
          description: successful
        '404':
          description: not found
        '422':
          description: invalid request
    put:
      summary: update coordinate
      tags:
      - Coordinate
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                latitude:
                  type: string
                  format: decimal
                longitude:
                  type: string
                  format: decimal
    delete:
      summary: delete coordinate
      tags:
      - Coordinate
      security:
      - jwt_auth: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
  "/api/v1/accommodations/{accommodation_id}/facilities":
    parameters:
    - name: accommodation_id
      in: path
      description: accommodation_id
      required: true
      schema:
        type: string
    post:
      summary: create facility
      tags:
      - Facility
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '201':
          description: successful created
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                checkin_start:
                  type: string
                  format: datetime
                checkin_end:
                  type: string
                  format: datetime
                checkout_start:
                  type: string
                  format: datetime
                checkout_end:
                  type: string
                  format: datetime
                credit_card:
                  type: boolean
                free_parking:
                  type: boolean
                wi_fi:
                  type: boolean
                breakfast:
                  type: boolean
                pets:
                  type: boolean
        required: true
  "/api/v1/accommodations/{accommodation_id}/facilities/{id}":
    parameters:
    - name: accommodation_id
      in: path
      description: accommodation_id
      required: true
      schema:
        type: string
    - name: id
      in: path
      description: id
      required: true
      schema:
        type: string
    get:
      summary: show facility
      tags:
      - Facility
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
    put:
      summary: update facility
      tags:
      - Facility
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                checkin_start:
                  type: string
                  format: datetime
                checkin_end:
                  type: string
                  format: datetime
                checkout_start:
                  type: string
                  format: datetime
                checkout_end:
                  type: string
                  format: datetime
                credit_card:
                  type: boolean
                free_parking:
                  type: boolean
                wi_fi:
                  type: boolean
                breakfast:
                  type: boolean
                pets:
                  type: boolean
              required: false
    delete:
      summary: delete facility
      tags:
      - Facility
      security:
      - jwt_auth: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
  "/api/v1/password/forgot":
    post:
      summary: forgot password
      tags:
      - Authentication
      description: forgot users password
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
              required:
              - email
        required: true
  "/api/v1/password/reset":
    post:
      summary: reset password
      tags:
      - Authentication
      description: reset password
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
              required:
              - email
              - password
  "/api/v1/accommodations/{accommodation_id}/rooms":
    parameters:
    - name: accommodation_id
      in: path
      description: accommodation_id
      required: true
      schema:
        type: string
    get:
      summary: list rooms
      tags:
      - Room
      parameters: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                check_in:
                  type: string
                check_out:
                  type: string
                number_of_peoples:
                  type: string
              required: false
        required: true
    post:
      summary: create room
      tags:
      - Room
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '201':
          description: successful created
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                places:
                  type: integer
                quantity:
                  type: integer
                description:
                  type: string
                bed:
                  type: string
                price_per_night:
                  type: integer
              required:
              - name
              - places
              - bed
              - description
              - quantity
              - price_per_night
        required: true
  "/api/v1/accommodations/{accommodation_id}/rooms/{id}":
    parameters:
    - name: accommodation_id
      in: path
      description: accommodation_id
      required: true
      schema:
        type: string
    - name: room_id
      in: path
      description: room_id
      required: true
      schema:
        type: string
    get:
      summary: show room
      tags:
      - Room
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
    put:
      summary: update room
      tags:
      - Room
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                places:
                  type: integer
                quantity:
                  type: integer
                description:
                  type: string
                bed:
                  type: string
                price_per_night:
                  type: integer
              required: false
    delete:
      summary: delete room
      tags:
      - Room
      security:
      - jwt_auth: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
  "/api/v1/toponyms":
    get:
      summary: list toponyms
      tags:
      - Toponym
      responses:
        '200':
          description: successful
        '404':
          description: not found
        '422':
          description: invalid request
  "/api/v1/{parentable_type}/{parentable_id}/toponyms":
    parameters:
    - name: parentable_type
      in: path
      description: f.e. attractions, accommodations
      required: true
      schema:
        type: string
    - name: parentable_id
      in: path
      description: f.e. attractions_id, accommodations_id
      required: true
      schema:
        type: string
    post:
      summary: create toponym
      tags:
      - Toponym
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '201':
          description: successful created
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                locality:
                  type: string
              required:
              - latitude
              - longitude
        required: true
    get:
      summary: show toponym
      tags:
      - Toponym
      responses:
        '200':
          description: successful
        '404':
          description: not found
        '422':
          description: invalid request
    put:
      summary: update toponym
      tags:
      - Toponym
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                locality:
                  type: string
    delete:
      summary: delete toponym
      tags:
      - Toponym
      security:
      - jwt_auth: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
  "/api/v1/users":
    get:
      summary: list users
      tags:
      - User
      security:
      - jwt_auth: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
    post:
      summary: create user
      tags:
      - User
      description: Creates a new user
      parameters: []
      responses:
        '201':
          description: successful created
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                email:
                  type: string
                password:
                  type: string
                role:
                  type: integer
              required:
              - name
              - email
              - password
        required: true
  "/api/v1/users/{id}":
    parameters:
    - name: id
      in: path
      description: user id
      required: true
      schema:
        type: string
    get:
      summary: show user
      tags:
      - User
      security:
      - jwt_auth: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
    put:
      summary: update user
      tags:
      - User
      security:
      - jwt_auth: []
      parameters: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                email:
                  type: string
                password:
                  type: string
              required:
              - name
              - email
              - password
        required: true
    delete:
      summary: delete user
      tags:
      - User
      security:
      - jwt_auth: []
      responses:
        '200':
          description: successful
        '401':
          description: unauthorized
        '404':
          description: not found
        '422':
          description: invalid request
servers:
- url: http://{defaultHost}
  variables:
    defaultHost:
      default: localhost:3000
- url: http://{ck_tour_Host}
  variables:
    ck_tour_Host:
      default: 164.92.135.103
components:
  securitySchemes:
    jwt_auth:
      type: http
      scheme: bearer
      bearerFormat: JWT
